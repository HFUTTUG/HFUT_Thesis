\ProvidesFile{hfuthesis-bachelor.bbx}[2021/01/19 v1.0 HFUT_Thesis biblatex
  bibliography style]

\RequireBibliographyStyle{gb7714-2015}

\ExecuteBibliographyOptions{
  gbnamefmt = lowercase,
  gbtype    = false,
  gbpub     = false,
  gbalign   = left,
}

\DeclareFieldFormat{journaltitle}{%
  \iffieldequalstr{userd}{english}{%
    \mkbibemph{#1}%
  }{%
    #1\isdot
  }%
}

\DeclareFieldFormat{titlecase}{\iftoggle{bbx:titlelink}{%
\iffieldundef{url}{\MakeSentenceCase{#1}}{%
\href{\thefield{url}}{#1}}}{\MakeSentenceCase{#1}}}

\DeclareFieldFormat{booktitlecase}{\MakeCapital{#1}}
\renewbibmacro*{booktitle}{%
  \ifboolexpr{
    test {\iffieldundef{booktitle}}
    and
    test {\iffieldundef{booksubtitle}}
  }
    {}
    {\printtext[booktitle]{\bibtitlefont%
       \printfield[booktitlecase]{booktitle}%
       \setunit{\subtitlepunct}%
       \printfield[booktitlecase]{booksubtitle}}%
     \newunit%标点换成下一句
     \setunit{\subtitlepunct}}%
  \printfield{booktitleaddon}}